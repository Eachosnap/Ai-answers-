<!DOCTYPE html><html>
<head>
  <title>Secure Video Call</title>
  <style>
    body {
      background: #f0f0f0;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    video {
      width: 45%;
      border: 2px solid #333;
      margin: 10px;
    }
    input, button {
      margin: 10px;
      padding: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h2>Secure Video Call</h2>
  <div>
    <button onclick="startCall()">Start Call</button>
    <input type="text" id="roomInput" placeholder="Enter Call Key">
    <button onclick="joinCall()">Join Call</button>
    <p>Your Call Key: <span id="callKey"></span></p>
  </div>
  <div>
    <video id="localVideo" autoplay muted></video>
    <video id="remoteVideo" autoplay></video>
  </div>  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.4.7/dist/peerjs.min.js"></script>  <script>
    let localStream;
    let peer;
    let call;

    async function startCall() {
      const key = Math.random().toString(36).substr(2, 9);
      document.getElementById('callKey').innerText = key;
      peer = new Peer(key);

      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      document.getElementById('localVideo').srcObject = stream;
      localStream = stream;

      peer.on('call', incomingCall => {
        incomingCall.answer(localStream);
        incomingCall.on('stream', remoteStream => {
          document.getElementById('remoteVideo').srcObject = remoteStream;
        });
      });
    }

    async function joinCall() {
      const key = document.getElementById('roomInput').value.trim();
      peer = new Peer();

      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      document.getElementById('localVideo').srcObject = stream;
      localStream = stream;

      peer.on('open', () => {
        call = peer.call(key, localStream);
        call.on('stream', remoteStream => {
          document.getElementById('remoteVideo').srcObject = remoteStream;
        });
      });
    }
  </script></body>
</html>
