<!DOCTYPE html>
<html>
<head>
  <title>Live Video Call Page</title>
  <style>
    body { background: #111; color: lime; text-align: center; font-family: sans-serif; }
    video { width: 45%; border: 2px solid lime; margin: 10px; }
    button, input { margin: 10px; padding: 10px; }
  </style>
</head>
<body>
  <h2>Live Video Call Page</h2>
  <video id="myVideo" autoplay muted></video>
  <video id="friendVideo" autoplay></video>
  <br>
  <button onclick="startCall()">Start Call</button>
  <button onclick="joinCall()">Join Call</button><br>
  <input type="text" id="callIdInput" placeholder="Enter Call ID to Join">
  <p>Your Call ID: <span id="myId"></span></p>

  <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
  <script>
    const myVideo = document.getElementById('myVideo');
    const friendVideo = document.getElementById('friendVideo');
    const myIdText = document.getElementById('myId');
    const callIdInput = document.getElementById('callIdInput');

    const peer = new Peer({
      host: 'peerjs.com',
      secure: true,
      port: 443
    });

    let localStream;

    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(stream => {
        localStream = stream;
        myVideo.srcObject = stream;
      });

    peer.on('open', id => {
      myIdText.textContent = id;
    });

    peer.on('call', call => {
      call.answer(localStream);
      call.on('stream', friendStream => {
        friendVideo.srcObject = friendStream;
      });
    });

    function startCall() {
      alert("Give this ID to your friend to join: " + peer.id);
    }

    function joinCall() {
      const callId = callIdInput.value;
      const call = peer.call(callId, localStream);
      call.on('stream', friendStream => {
        friendVideo.srcObject = friendStream;
      });
    }
  </script>
</body>
</html>
